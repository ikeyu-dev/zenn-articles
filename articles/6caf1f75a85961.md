---
title: "Nuxt3ã§useFetchã‚’ä½¿ã†éš›ã«å›°ã£ãŸè©±"
emoji: "ğŸ“Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: true
---

ä»Šå›ã¯ Nuxt3 ã§è©°ã¾ã£ãŸéƒ¨åˆ†ãƒ»å›°ã£ãŸéƒ¨åˆ†ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
å†…å®¹ã¯**useFetch**ã§ã™ã€‚

---

## useFetch ã§ã® CORS ã‚¨ãƒ©ãƒ¼(é–‹ç™ºç’°å¢ƒ)

Nuxt ã® use~ã‚·ãƒªãƒ¼ã‚ºã§é »å‡ºãªã®ãŒ`useFetch`ã€‚æœ€è¿‘ä½œã£ãŸãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã« Zenn ã®è¨˜äº‹ä¸€è¦§ã‚’è¼‰ã›ã‚ˆã†ã¨æ€ã„ã€Zenn dev API ã®è¨˜äº‹ã¨ useFetch ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã¿ã„ã–ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã‚‹ã¨...

:::message alert
Access to fetch at 'https://zenn.dev/api/articles?username=uyuy_create' from origin '(ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼)' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.
:::

ãªã‚“ã‹ã‚¨ãƒ©ãƒ¼ã‚’åãã¾ã—ãŸã€‚ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã¯æ¶ˆãˆã‚‹ã®ã§ã™ãŒã€ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ä¿å­˜ã™ã‚‹ã¨ã¾ãŸåŒã˜ã‚¨ãƒ©ãƒ¼ãŒã€‚

ã¾ãšã¯[Google AI Studio](https://aistudio.google.com/prompts/new_chat)ã«èã„ã¦ã¿ã¾ã—ãŸã€‚ã™ã‚‹ã¨

`1. Zenn APIã®CORSå¯¾å¿œã‚’å¾…ã¤ (ç†æƒ³çš„ã ãŒã€å®Ÿç¾ã™ã‚‹ã¨ã¯é™ã‚‰ãªã„):`

ã„ããªã‚Šéç¾å®Ÿçš„ãªå›ç­”ã‚’ã—ã¦ãã¾ã—ãŸã€‚ã»ã‹ã«ã‚‚è§£æ±ºç­–ã‚’ã„ãã¤ã‹æç¤ºã—ã¦ã¯ãã‚ŒãŸã‚‚ã®ã®ã€çµå±€è§£æ±ºã«ã¯è‡³ã‚‰ãš...ã€‚

---

## è§£æ±º ... ?

ã„ã‚ã„ã‚ã©ã£ã“ã„ã—ã‚‡ã‚ã£ã¦ã€ã¤ã„ã«åŸå› ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚

**useFetch ã¯é€šå¸¸ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ fetch ã—ã¦å€¤ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã«æ¸¡ã™ã®ã§ CORS ã®ã‚¨ãƒ©ãƒ¼ã¯å›é¿ã™ã‚‹ãŒã€ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã¨ fetch ãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§è¡Œã‚ã‚Œã¦ã—ã¾ã„ CORS ã«å¼•ã£ã‹ã‹ã‚‹ã‹ã‚‰ã€‚**

ã¾ã•ã‹ã®**ä»•æ§˜**ã€‚ã©ã†ã™ã‚Œã°ã„ã„ã‚“ã ...ã€‚
ã—ã‹ã—èª¿ã¹ã¦ã¿ã‚‹ã¨ã€å›é¿ã§ãã‚‹æ–¹æ³•ãŒã‚ã‚‹ã‚‰ã—ã„ã€‚

---

## è§£æ±ºã€‚

ãã®æ–¹æ³•ã¨ã¯ã€**server/api ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« API ãƒ«ãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹**ã¨ã„ã†ã‚‚ã®ã€‚
ãŸã—ã‹ã«ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›´ä¸‹ã«`server`ã¨ã„ã†ãƒ•ã‚©ãƒ«ãƒ€ãŒã‚ã‚Šã¾ã—ãŸã€‚

```js script:server/api/zenn.ts
import { defineEventHandler } from "h3";

export default defineEventHandler(async (event) => {
    const username = getQuery(event).username;
    const url = `https://zenn.dev/api/articles?username=${username}`;
    const response = await fetch(url);
    return await response.json();
});
```

`server/api`ã«ä¸Šè¨˜ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’è¨­ç½®ã—ã€ãã‚Œã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§å‘¼ã³å‡ºã™ã€‚
ã“ã‚ŒãŒä¸€èˆ¬çš„ãªè§£æ±ºç­–ã®ã‚ˆã†ã§ã™ã€‚

---

## çµè«–

server ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½¿ç”¨æ–¹æ³•ã‚’å­¦ã³ã¾ã—ãŸã€‚
æœ¬ç•ªç’°å¢ƒã§åŒã˜ã‚¨ãƒ©ãƒ¼ã‚’åã„ãŸã‚‰ã©ã“ã‹ã—ã‚‰ãƒŸã‚¹ãŒã‚ã‚‹ã®ã§ã—ã‚‡ã†ãŒã€é–‹ç™ºç’°å¢ƒã§ã¯ useFetch ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ fetch ã®ã‚¨ãƒ©ãƒ¼ã«ã¤ã„ã¦ã¯å°‘ã—å¯›å®¹ã«ãªã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

Author: uyuyu
